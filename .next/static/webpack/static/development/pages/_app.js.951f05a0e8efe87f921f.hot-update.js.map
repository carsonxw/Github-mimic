{"version":3,"file":"static/webpack/static/development/pages/_app.js.951f05a0e8efe87f921f.hot-update.js","sources":["webpack:///./components/Layout.jsx"],"sourcesContent":["import { useState ,useCallback } from 'react';\nimport getConfig from 'next/config';\nimport Link from 'next/link';\nimport { Layout, Icon, Input, Avatar, Tooltip, Dropdown, Menu} from 'antd';\nimport { connect } from 'react-redux';\nimport { logout } from '../store/store';\nimport Container from './Container';\nimport axios from 'axios';\nimport {withRouter} from 'next/router';\n\nconst { Header, Content, Footer } = Layout;\n\nconst { publicRuntimeConfig } = getConfig();\n\nconst githubIconStyle = { \n    color: 'white',\n    fontSize: 40,\n    display: 'block',\n    paddingTop: 10,\n    marginRight: 20\n};\n\nconst footerStyle = {\n    textAlign: 'center'\n} \n\nfunction CustomizedLayout ({ children, user, onLogout, router }) {\n    const urlQuery = router.query && router.query.query;\n    const [search, setSearch] =  useState(urlQuery || '');\n    \n    const handleSearchChange = useCallback(event => {\n        setSearch(event.target.value)\n    }, [setSearch]);\n\n    const handleOnSearch = useCallback(() => {\n        router.push(`/search?query=${search}`);\n    }, [search]);\n\n    const handleLogout = useCallback(() => {\n        onLogout();\n    }, [onLogout]);\n\n    const handleGotoOauth = useCallback(e => {\n        e.preventDefault();\n        axios.get(`/prepare-auth?url=${router.asPath}`).then(resp => {\n            if (resp.status === 200) {\n                location.href = publicRuntimeConfig.OAUTH_URL;\n            } else {\n                console.log('prepare auth failed', resp);\n            }\n        }).catch(e => {\n            console.log('prepare auth failed', e);\n        })\n    }, []);\n\n    const userDropDown = (\n        <Menu>\n            <Menu.Item>\n                <a href=\"javascript:void(0)\" onClick={handleLogout}>\n                    Log out\n                </a>\n            </Menu.Item>\n        </Menu>\n    )\n\n    return (\n        <Layout >\n            <Header>\n                <Container renderer={<div className=\"header-inner\" />}>\n                    <div className=\"header-left\">\n                        <div className=\"logo\">\n                            <Link href=\"/\">\n                                <Icon type=\"github\" style={githubIconStyle}/>\n                            </Link>\n                        </div>\n                        <div>\n                            <Input.Search \n                                placeholder=\"search repository\"\n                                value={search}\n                                onChange={handleSearchChange} \n                                onSearch={handleOnSearch}\n                            /> \n                        </div>\n                    </div>\n                    <div className=\"header-right\">\n                        <div className=\"user\">\n                        {\n                            user && user.id ? (\n                                <Dropdown overlay={userDropDown}>\n                                    <a href=\"/\">\n                                        <Avatar size={40} src={user.avatar_url}/>\n                                    </a>\n                                </Dropdown>\n                            ) : (\n                                <Tooltip title=\"click to login\">\n                                    <a href={ `/prepare-auth?url=${router.asPath}` } >\n                                        <Avatar size={40} icon=\"user\"/>\n                                    </a>\n                                </Tooltip>\n                            )\n                        }\n                            \n                        </div>\n                    </div>\n                </Container>\n            </Header>\n            <Content>\n                <Container renderer={<div />}>\n                    {children}    \n                </Container>\n            </Content>\n            <Footer style={footerStyle}>\n                Developed by Carson @ \n                <a href=\"mailto:test@test.com\">test@test.com</a>\n            </Footer>\n            <style jsx>{`\n                .header-inner {\n                    display: flex;\n                    justify-content: space-between\n                }\n                .header-left {\n                    display: flex;\n                    justify-content: flex-start;\n                }\n                .content {\n                    color: red;\n                }\n            `}</style>\n            <style jsx global>{`\n                #__next {\n                    height: 100%;\n                }\n                .ant-layout {\n                    min-height: 100%;\n                }\n                .ant-layout-header {\n                    padding-left: 0;\n                    padding-right: 0;\n                }\n                .ant-layout-content {\n                    background: #ffffff;\n                }\n            `}</style>\n        </Layout>\n    );\n};\n\nconst mapStateToProps = state => {\n    return {\n        user: state.user\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onLogout: () => dispatch(logout()),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(CustomizedLayout));"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AADA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAAA;AAAA;AAOA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAQA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAIA;AAAA;AAEA;AAAA;AAAA;AA/CA;AAAA;AAAA;AAAA;AA+EA;AACA;AADA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AADA;AAGA;AACA;AACA;;;;A","sourceRoot":""}