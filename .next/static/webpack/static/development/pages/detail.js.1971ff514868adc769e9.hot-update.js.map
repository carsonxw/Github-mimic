{"version":3,"file":"static/webpack/static/development/pages/detail.js.1971ff514868adc769e9.hot-update.js","sources":["webpack:///./components/MarkdownRenderer.jsx","webpack:///./pages/detail/index.js"],"sourcesContent":["import MarkdownIt from 'markdown-it';\nimport 'github-markdown-css';\n\nimport { memo, useMemo } from 'react';\n\nconst md = new MarkdownIt({\n    html: true,\n    linkify: true\n});\n\n//decode Chinese\nfunction b64_to_utf8(str) {\n    return decodeURIComponent(escape(atob(str)));\n}\n\nexport default memo(function MarkdownRenderer({ content, isBase64 }) {\n    \n    const markdown = isBase64 ? b64_to_utf8(content) : content;\n    //re-render only if the markdown changes\n    const html = useMemo(() => \n        md.render(markdown)\n    , [markdown]);\n\n    return (\n        <div className=\"markdown-body\">\n            <div dangerouslySetInnerHTML={{ __html: html }} />  \n        </div>\n    )\n});","import MarkdownIt from 'markdown-it';\n\nimport withRepoBasic from '../../components/with-repo-basic';\nimport api from '../../lib/api';\n\nimport MDRenderer from '../../components/MarkdownRenderer';\n\nfunction Detail({ readme }) {\n    let content = b64_to_utf8(readme.content);\n    content += `This is http://www.baidu.com`;\n    const html = md.render(content);\n    \n    return (\n        <div className=\"markdown-body\">\n            <div dangerouslySetInnerHTML={{ __html: html }} />  \n        </div>\n    )\n}\n\nDetail.getInitialProps = async ({ ctx: {\n    query: {\n        owner, \n        name \n    },\n    req,\n    res\n}}) => {\n    console.log('detial get init');\n    const readmeResp = await api.request(\n        {\n            url: `/repos/${owner}/${name}/readme`\n        },\n        req,\n        res\n    )\n     \n    return {\n        readme: readmeResp.data\n    }\n}\n\nexport default withRepoBasic(Detail, 'readme') ;"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAEA;AACA;AACA;AAFA;AACA;AAKA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAIA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAQA;AARA;AAAA;AAWA;AADA;AACA;AAXA;AASA;AATA;AAkBA;AADA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAqBA;;;;A","sourceRoot":""}