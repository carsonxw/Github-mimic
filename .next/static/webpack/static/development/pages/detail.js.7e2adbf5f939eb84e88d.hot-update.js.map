{"version":3,"file":"static/webpack/static/development/pages/detail.js.7e2adbf5f939eb84e88d.hot-update.js","sources":["webpack:///./components/with-repo-basic.jsx"],"sourcesContent":["import Repo from './Repos';\nimport Link from 'next/link';\nimport { withRouter } from 'next/router';\n\nconst api = require('../lib/api');\n\n//help function to concat query string\nfunction makeQuery(queryObject) {\n    const query = Object.entries(queryObject).reduce(\n        (result, entry) => {\n            result.push(entry.join('='));\n            return result;\n        }, []).join('&');\n    return `?${query}`;\n}\n\nexport default function (Comp) {\n    function WithDetail({ repoBasic, router }) {\n        console.log(repoBasic);\n        const query = makeQuery(router.query);\n        console.log(query)\n        return (\n            <div c lassName=\"root\">\n                <div className=\"repo-basic\">\n                    <Repo repo={repoBasic}/>\n                    <div className=\"tabs\">\n                        <Link href={`/detail${query}`}>\n                            <a className=\"tab readme\">Readme </a>\n                        </Link>\n                        <Link href={`/detail/issues${query}`}>\n                         <a href=\"\" className=\"tab issues\">Issues</a>\n                        </Link>\n                    </div>\n                </div>\n                <div>\n                    <Comp />\n                </div>\n                <style jsx>{`\n                    .root {\n                        padding-top: 20px;\n                    }\n                    .repo-basic {\n                        padding: 20px;\n                        border: 1px solid #eee;\n                        margin-bottom: 20px;\n                        border-radius: 5px;\n                    }\n                    .tab + .tab {\n                        margin-left: 20px;\n                    }\n                `}</style>\n            </div>\n        )\n    }\n    \n    WithDetail.getInitialProps = async (context) => {\n        console.log('context',context);\n        const { router, ctx } = context;\n        const { owner, name } = ctx.query;\n        const repoBasic = await api.request({\n                url: `/repos/${owner}/${name}`, \n            },\n            ctx.req,\n            ctx.res\n        );\n\n        let pageData = {} ;\n        if (Comp.getInitialProps) {\n            pageData = await Comp.getInitialProps(context);\n        }\n    \n        return {\n            repoBasic: repoBasic.data,\n            ... pageData\n        }\n    };\n\n    return withRouter(WithDetail) ;\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAIA;AAAA;AAZA;AAAA;AA+BA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAKA;AADA;AACA;AALA;AAIA;AAOA;AACA;AAZA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAaA;AACA;AAdA;AAAA;AAiBA;AAjBA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAqBA;AACA;;;;A","sourceRoot":""}